version: '3'
services:
  node1:
    container_name: node-1-testnet
    build: .
    cap_add:
      - ALL
    command: bitcoind -testnet -addnode=10.8.0.12:12345 -addnode=10.8.0.13:12345 -addnode=10.8.0.14:12345 -rpcuser=rpc -rpcpassword=x -rpcport=10340  --datadir=/root/bitcoind-bims/ -port=12345 -walletbroadcast=1 -txindex=1 -server=1 -rest=1 
    volumes:
      - ./miner:/root/miner
      - ./dashboard:/root/dashboard
    networks:
      vpcbr:
        ipv4_address: 10.8.0.11
  node2:
    container_name: node-2-testnet
    build: .
    cap_add:
      - ALL
    command: bitcoind -testnet -addnode=10.8.0.11:12345 -addnode=10.8.0.13:12345 -addnode=10.8.0.14:12345 -rpcuser=rpc -rpcpassword=x -rpcport=10340 --datadir=/root/bitcoind-bims/ -port=12345 -walletbroadcast=1
    volumes:
      - ./miner:/root/miner
    networks:
      vpcbr:
        ipv4_address: 10.8.0.12
  node3:
    container_name: node-3-testnet
    build: .
    cap_add:
      - ALL
    command: bitcoind -testnet -addnode=10.8.0.12:12345 -addnode=10.8.0.11:12345 -addnode=10.8.0.14:12345 -rpcuser=rpc -rpcpassword=x -rpcport=10340 --datadir=/root/bitcoind-bims/ -port=12345 -walletbroadcast=1
    volumes:
      - ./miner:/root/miner
    networks:
      vpcbr:
        ipv4_address: 10.8.0.13
  node4:
    container_name: node-4-testnet
    build: .
    cap_add:
      - ALL
    command: bitcoind -testnet -addnode=10.8.0.11:12345 -addnode=10.8.0.13:12345 -addnode=10.8.0.12:12345 -rpcuser=rpc -rpcpassword=x -rpcport=10340 --datadir=/root/bitcoind-bims/ -port=12345 -walletbroadcast=1
    volumes:
      - ./miner:/root/miner
    networks:
      vpcbr:
        ipv4_address: 10.8.0.14
networks:
  vpcbr:
    driver: bridge
    ipam:
     config:
       - subnet: 10.8.0.0/16
